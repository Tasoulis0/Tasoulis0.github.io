
let data = [
    {
        name: "Î‘Î³Î¯Î± Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®",
        num: 78,
        link: "./files/AgiaP.jpg"
    },
    {
        name: "Î‘Î³Î¯Î± Î¦Ï‰Ï„ÎµÎ¹Î½Î®",
        num: 104,
        link: "./files/AgiaF.jpg"
    },
    {
        name: "Î†Î³Î¹Î¿Ï‚ Î™Ï‰Î¬Î½Î½Î·Ï‚",
        num: 97,
        link: "./files/AgiosI.jpg"
    },
    {
        name: "ÎÎ­Ï†Ï‚ Î‘Î¼Î¬ÏÎ¹",
        num: 164,
        link: "./files/NefsA.jpg"
    },
    {
        name: "Î†Î½Ï‰ ÎœÎ­ÏÎ¿Ï‚",
        num: 280,
        link: "./files/AnoM.jpg"
    },
    {
        name: "Î‘Ï€Î¿Î´Î¿ÏÎ»Î¿Ï…",
        num: 216,
        link: "./files/Apodoulou.jpg"
    },
    {
        name: "Î‘Ï€ÏŒÏƒÏ„Î¿Î»Î¿Î¹",
        num: 184,
        link: "./files/Apostoloi.jpg"
    },
    {
        name: "Î†ÏÎ´Î±ÎºÏ„Î¿Ï‚",
        num: 27,
        link: "./files/Ardaktos.jpg"
    },
    {
        name: "Î’Î±Î¸Î¹Î±ÎºÏŒ",
        num: 15,
        link: "./files/Bathiako.jpg"
    },
    {
        name: "Î’Î¹Î¶Î¬ÏÎ¹",
        num: 67,
        link: "./files/Bizari.jpg"
    },
    {
        name: "Î’Î¹ÏƒÏ„Î±Î³Î®",
        num: 219,
        link: "./files/Bistagi.jpg"
    },
    {
        name: "Î’Î¿Î»Î¹ÏŽÎ½ÎµÏ‚",
        num: 181,
        link: "./files/Boliones.jpg"
    },
    {
        name: "Î’ÏÏÏƒÎµÏ‚",
        num: 94,
        link: "./files/Brises.jpg"
    },
    {
        name: "Î“Î­Î½Î½Î±",
        num: 29,
        link: "./files/Genna.jpg"
    },
    {
        name: "Î“ÎµÏÎ±ÎºÎ¬ÏÎ¹",
        num: 355,
        link: "./files/Gerakari.jpg"
    },
    {
        name: "Î“Î¿Ï…ÏÎ³Î¿ÏÎ¸Î¿Î¹",
        num: 1,
        link: "./files/Gourgouthi.jpg"
    },
    {
        name: "Î”ÏÏ…Î³Î¹Î­Ï‚",
        num: 27,
        link: "./files/Drigies.jpg"
    },
    {
        name: "Î•Î»Î­Î½ÎµÏ‚",
        num: 57,
        link: "./files/Elenes.jpg"
    },
    {
        name: "Î˜ÏÏŒÎ½Î¿Ï‚",
        num: 60,
        link: "./files/Thronos.jpg"
    },
    {
        name: "ÎšÎ±Î»Î¿Î³Î­ÏÎ¿Ï…",
        num: 127,
        link: "./files/Kalogerou.jpg"
    },
    {
        name: "ÎšÎ±ÏÎ´Î¬ÎºÎ¹",
        num: 38,
        link: "./files/Kardaki.jpg"
    },
    {
        name: "ÎšÎ»Î·ÏƒÎ¯Î´Î¹",
        num: 26,
        link: "./files/Klisidi.jpg"
    },
    {
        name: "ÎšÎ¿Ï…ÏÎ¿ÏÏ„ÎµÏ‚",
        num: 238,
        link: "./files/Kouroutes.jpg"
    },
    {
        name: "Î›Î±Î¼Ï€Î¹ÏŽÏ„ÎµÏ‚",
        num: 70,
        link: "./files/Lampiotes.jpg"
    },
    {
        name: "Î›Î¿Ï‡ÏÎ¹Î¬",
        num: 214,
        link: "./files/Loxria.jpg"
    },
    {
        name: "ÎœÎ­ÏÏ‰Î½Î±Ï‚",
        num: 340,
        link: "./files/Meronas.jpg"
    },
    {
        name: "ÎœÎµÏƒÎ¿Î½Î®ÏƒÎ¹Î±",
        num: 111,
        link: "./files/Mesonisia.jpg"
    },
    {
        name: "ÎœÎ¿Î½Î±ÏƒÏ„Î·ÏÎ¬ÎºÎ¹",
        num: 164,
        link: "./files/Monastiraki.jpg"
    },
    {
        name: "ÎÎ¯Î¸Î±Ï…ÏÎ·",
        num: 312,
        link: "./files/Nithabri.jpg"
    },
    {
        name: "ÎŸÏˆÎ¹Î³Î¹Î¬Ï‚",
        num: 25,
        link: "./files/Opsigias.jpg"
    },
    {
        name: "Î Î±Î½Ï„Î¬Î½Î±ÏƒÏƒÎ±",
        num: 168,
        link: "./files/Pantanassa.jpg"
    },
    {
        name: "Î Î±Ï„ÏƒÏŒÏ‚",
        num: 228,
        link: "./files/Patsos.jpg"
    },
    {
        name: "Î ÎµÏ„ÏÎ¿Ï‡ÏŽÏÎ¹",
        num: 92,
        link: "./files/Petroxori.jpg"
    },
    {
        name: "Î Î»Î±Ï„Î¬Î½Î¹Î±",
        num: 218,
        link: "./files/Platania.jpg"
    },
    {
        name: "Î Î»Î¬Ï„Î±Î½Î¿Ï‚",
        num: 384,
        link: "./files/Platanos.jpg"
    },
    {
        name: "Î¡Î¯Î¶Î¹ÎºÎ±Ï‚",
        num: 2,
        link: "./files/Rizikas.jpg"
    },
    {
        name: "Î£Î¬Ï„Î±",
        num: 13,
        link: "./files/Sata.jpg"
    },
    {
        name: "Î£Ï‡Î¿Î»Î® Î‘ÏƒÏ‰Î¼Î¬Ï„Ï‰Î½",
        num: 21,
        link: "./files/SxoliA.jpg"
    },
    {
        name: "Î¦Î¿Ï…ÏÏ†Î¿Ï…ÏÎ¬Ï‚",
        num: 513,
        link: "./files/Fourfouras.jpg"
    },
    {
        name: "Î§Ï‰ÏÎ´Î¬ÎºÎ¹",
        num: 5,
        link: "./files/Xordaki.jpg"
    }
];

// mandres 8 

const screenWidth = window.innerWidth;
const screenHeight = window.innerHeight;
const LayoutWidth = 830;
const maxIndex = data.length - 1;

var score = 0;
var x = -1;
var y = -1;

//----------------------IMAGE-ELEMENTS----------------------------
const img1 = document.getElementById("image1");
const img1Comp = getComputedStyle(img1);

const img2 = document.getElementById("image2");
const img2Comp = getComputedStyle(img2);

const img1Rect = img1.getBoundingClientRect();
const img2Rect = img2.getBoundingClientRect();

const imageDiv = document.getElementById('ImagesDiv');

var AnImg1 = document.createElement('img');
imageDiv.appendChild(AnImg1);

var AnImg2 = document.createElement('img');
imageDiv.appendChild(AnImg2);
//------------------------------------------------------

const but1 = document.getElementById("button1");
const but1Comp = getComputedStyle(but1);

const buttonDiv = document.getElementById('buttonDiv');

const result = document.getElementById('lose');

document.getElementById('button1').addEventListener('click', handleButtonClick);
document.getElementById('button2').addEventListener('click', handleButtonClick);

//------------------------------------------------------
const text1 = document.getElementById("text1");
const text2= document.getElementById("text2");
const scoreText = document.getElementById("score");

//------------------------------------------------------

var test = 0;



/*ASSIGNMENT OF CSS VARIABLES*/ 
if(screenWidth > LayoutWidth){ //ORIZONTIO 
    document.documentElement.style.setProperty('--transform', `translateX(-${(screenWidth/2.0) }px)`);
}
else{
    document.documentElement.style.setProperty('--transform', `translateY(-${ img2Rect.top - img1Rect.top }px)`);

    if(screenHeight - 2 * parseFloat(img1Comp.height) - 1.4* parseFloat(but1Comp.height) < 0){

        console.log("mpika");

        document.documentElement.style.setProperty('--topForButtons', `${parseFloat(img1Comp.height) - parseFloat(but1Comp.height) - 5 }px`);
        document.getElementById("buttonDiv").style.position = 'relative';
        document.getElementById("buttonDiv").style.justifyContent = 'center';
        document.getElementById("buttonDiv").style.minHeight = '0';
    }

}

/*SETS THE GIVEN IMAGE ELEMENT POSITION TO THE GIVEN IMAGE ELEMENT POSITION AND CHANGES SRC 
    PARAMETERS:() */
function createImg(imgElem , path , position_element , mode){

    imgElem.src = path ;
    imgElem.classList.add('Myimg');
   
    imgElem.style.position = 'absolute';
    const computedStyle = getComputedStyle(position_element);
   
    imgElem.style.width = computedStyle.width ;
    imgElem.style.height = computedStyle.height ;

    const rect = position_element.getBoundingClientRect();
    const containerRect = imageDiv.getBoundingClientRect();
    imgElem.style.top = (rect.top - containerRect.top) + 'px';

    if(mode){ //START POSITION OF ANIMATION IMAGE1 SET TO IMAGE2
        imgElem.style.left = (rect.left - containerRect.left) + 'px';
    }
    else{   //START POSITION OF ANIMATION IMAGE2 SET TO THE EDGE OF THE SCREEN

        if(screenWidth > LayoutWidth ){
        imgElem.style.left = `${screenWidth}` + 'px';
        }
        else{
            imgElem.style.top = `${parseFloat(img1Comp.height) + parseFloat(img2Comp.height) }px` ;
        }
    }
}

function getRandomInt(min, max) {
    min = Math.ceil(min); // Round up to ensure min is inclusive
    max = Math.floor(max); // Round down to ensure max is inclusive
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function findNext(stay,change){

    var prev = change;

    change = getRandomInt(0,maxIndex);

    while(stay === change || prev === change){

        change = getRandomInt(0,maxIndex);
    }
    return change;
}


function setStart(){

    x = getRandomInt(0,maxIndex);
    y = findNext(x,y);

    img1.src = data[x].link;
    img2.src = data[y].link;

    text1.innerText = data[x].name +"\n" + data[x].num + " ÎšÎ‘Î¤ÎŸÎ™ÎšÎŸÎ™";
    text2.innerText = data[y].name ;

}
function lose(){

    console.log("YOU LOST");

}

setStart();


var pressed = false;
var lost = false;
function handleButtonClick(event) {

    var tmp;
    
    if(pressed){
        return;
    }
    pressed  = true;


    if (event.target.id === 'button1') {
        console.log('Button 1 was clicked');
        if(data[x].num >= data[y].num){
            score +=1;
        }
        else{
            lost = true;

        }
    } else if (event.target.id === 'button2') {
        console.log('Button 2 was clicked');

        if(data[y].num >= data[x].num){
            score +=1;
        }
        else{
            lost = true;
        }
    }

    scoreText.innerText = "ðŸŽ¯SCORE : "+ `${score}`+" ðŸŽ¯"


    text2.innerText = data[y].name +"\n" + data[y].num + " ÎšÎ‘Î¤ÎŸÎ™ÎšÎŸÎ™";
           
    
    setTimeout(() => {

        if(lost){
            lose();
            return;
        }

        createImg(AnImg1 , data[y].link , document.getElementById('image2'),true);

        x = findNext(y,x);

        createImg(AnImg2 , data[x].link , document.getElementById('image2'),false);

        tmp = x;
        x = y;
        y = tmp;

        AnImg1.classList.add("move-image");
        AnImg2.classList.add("move-image");

        AnImg1.style.opacity = '1';
        AnImg2.style.opacity = '1';

        
        setTimeout(() => {
            
            img1.src = data[x].link;
            img2.src = data[y].link;

            text1.innerText = data[x].name +"\n" + data[x].num + " ÎšÎ‘Î¤ÎŸÎ™ÎšÎŸÎ™";
            text2.innerText = data[y].name ;
            
            AnImg1.style.opacity = '0';
            AnImg2.style.opacity = '0';

            AnImg1.classList.remove("move-image");
            AnImg2.classList.remove("move-image");

            pressed = false;    
        }, 1300); // Delay in milliseconds (2000 ms = 2 seconds)
        
    },800); 
}

function lose(){

    imageDiv.style.display = 'none';
    buttonDiv.style.display = 'none';
    document.body.style.background = 'red';

    result.style.display = 'flex';
    result.style.flexDirection = "column";


    document.getElementById("resultID").textContent = "SCORE : " + `${score}`; 

}


document.getElementById('playAgain').addEventListener('click', function() {
    location.reload(); // Refreshes the page
});



// window.addEventListener('resize', function() {
//     window.location.reload(); 
// });

// Add event listeners to buttons
var button1 = document.getElementsByClassName('higherButton');

// Iterate over the HTMLCollection and add event listeners
Array.from(button1).forEach(button => {
    button.addEventListener('mouseover', () =>{ img1.style.filter = 'brightness(100%)'; AnImg2.style.filter = 'brightness(100%)';} );
    button.addEventListener('mouseout', () =>{ img1.style.filter = 'brightness(60%)'; AnImg2.style.filter = 'brightness(60%)';});
});

var button2  = document.getElementsByClassName('lowerButton');
Array.from(button2).forEach(button => {
    button.addEventListener('mouseover', () =>{ img2.style.filter = 'brightness(100%)'; AnImg1.style.filter = 'brightness(100%)';});
    button.addEventListener('mouseout',  () =>{ img2.style.filter = 'brightness(60%)';  AnImg1.style.filter = 'brightness(60%)';});
});

